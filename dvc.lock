schema: '2.0'
stages:
  prepare:
    cmd: python src/data_prep.py --input data/raw/telco_churn.csv --output 
      data/processed --params params.yaml
    deps:
    - path: data/raw/telco_churn.csv
      md5: 006527876bfe18c977d74eb4bc59443f
      size: 873370
    - path: params.yaml
      md5: 3ecd8da4846ddfe063b0cdbfacfa3be2
      size: 698
    - path: src/data_prep.py
      md5: 79c06827aa55a4c833c535635b9a1abf
      size: 7117
    params:
      params.yaml:
        data_prep:
          test_size: 0.2
          random_state: 42
          target_column: churn
          id_column: customer_id
          numeric_features:
          - age
          - tenure_months
          - monthly_charges
          - total_charges
          categorical_features:
          - gender
          - region
          - contract_type
          - internet_service
          - phone_service
          - multiple_lines
          - payment_method
    outs:
    - path: data/processed/X_test.csv
      md5: 71bcfda447a5023ff614cffae8f3558b
      size: 186616
    - path: data/processed/X_train.csv
      md5: fcfcaaf8a5acbf8fe85dce0d21265bfc
      size: 745946
    - path: data/processed/metadata.json
      md5: 9c8cebd5c790a0e6725cb63026f5b19e
      size: 1287
    - path: data/processed/y_test.csv
      md5: 73edd42799a08b81b9e6acdc34b51e64
      size: 6007
    - path: data/processed/y_train.csv
      md5: 6bd7ba9baf5cb0bffaa13d646600493e
      size: 24007
  train:
    cmd: python src/train.py --data data/processed --model models/model.joblib 
      --metrics metrics.json --params params.yaml
    deps:
    - path: data/processed/X_test.csv
      md5: 71bcfda447a5023ff614cffae8f3558b
      size: 186616
    - path: data/processed/X_train.csv
      md5: fcfcaaf8a5acbf8fe85dce0d21265bfc
      size: 745946
    - path: data/processed/y_test.csv
      md5: 73edd42799a08b81b9e6acdc34b51e64
      size: 6007
    - path: data/processed/y_train.csv
      md5: 6bd7ba9baf5cb0bffaa13d646600493e
      size: 24007
    - path: params.yaml
      md5: 3ecd8da4846ddfe063b0cdbfacfa3be2
      size: 698
    - path: src/train.py
      md5: 77532def6fd4c37231db2ea6cbe6fe39
      size: 8071
    params:
      params.yaml:
        train:
          model_type: random_forest
          random_forest:
            n_estimators: 150
            max_depth: 15
            min_samples_split: 10
            min_samples_leaf: 2
            random_state: 42
          metrics:
          - accuracy
          - precision
          - recall
          - f1_score
          - roc_auc
    outs:
    - path: metrics.json
      md5: 2936a9c44bcce2d3e9327da3c4eb0258
      size: 489
    - path: models/model.joblib
      md5: 08e4462a8b6d76e93c938e95fc956254
      size: 16765241
