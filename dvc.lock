schema: '2.0'
stages:
  prepare:
    cmd: python src/data_prep.py --input data/raw/telco_churn.csv --output 
      data/processed --params params.yaml
    deps:
    - path: data/raw/telco_churn.csv
      md5: 006527876bfe18c977d74eb4bc59443f
      size: 873370
    - path: params.yaml
      md5: f999831007da74990b170eb997bf38b8
      size: 803
    - path: src/data_prep.py
      md5: 79c06827aa55a4c833c535635b9a1abf
      size: 7117
    params:
      params.yaml:
        data_prep:
          test_size: 0.2
          random_state: 42
          target_column: churn
          id_column: customer_id
          numeric_features:
          - age
          - tenure_months
          - monthly_charges
          - total_charges
          categorical_features:
          - gender
          - region
          - contract_type
          - internet_service
          - phone_service
          - multiple_lines
          - payment_method
    outs:
    - path: data/processed/X_test.csv
      md5: 71bcfda447a5023ff614cffae8f3558b
      size: 186616
    - path: data/processed/X_train.csv
      md5: fcfcaaf8a5acbf8fe85dce0d21265bfc
      size: 745946
    - path: data/processed/metadata.json
      md5: 9c8cebd5c790a0e6725cb63026f5b19e
      size: 1287
    - path: data/processed/y_test.csv
      md5: 73edd42799a08b81b9e6acdc34b51e64
      size: 6007
    - path: data/processed/y_train.csv
      md5: 6bd7ba9baf5cb0bffaa13d646600493e
      size: 24007
  train:
    cmd: python src/train.py --data data/processed --model models/model.joblib 
      --metrics metrics.json --params params.yaml
    deps:
    - path: data/processed/X_test.csv
      md5: 71bcfda447a5023ff614cffae8f3558b
      size: 186616
    - path: data/processed/X_train.csv
      md5: fcfcaaf8a5acbf8fe85dce0d21265bfc
      size: 745946
    - path: data/processed/y_test.csv
      md5: 73edd42799a08b81b9e6acdc34b51e64
      size: 6007
    - path: data/processed/y_train.csv
      md5: 6bd7ba9baf5cb0bffaa13d646600493e
      size: 24007
    - path: params.yaml
      md5: f999831007da74990b170eb997bf38b8
      size: 803
    - path: src/train.py
      md5: fd2bc6ad3f023d1856cc38ef355ad4f5
      size: 8758
    params:
      params.yaml:
        train:
          model_type: logistic_regression
          random_forest:
            n_estimators: 150
            max_depth: 15
            min_samples_split: 10
            min_samples_leaf: 2
            random_state: 42
          logistic_regression:
            C: 1.0
            max_iter: 1000
            solver: lbfgs
            random_state: 42
          metrics:
          - accuracy
          - precision
          - recall
          - f1_score
          - roc_auc
    outs:
    - path: metrics.json
      md5: 78abb01f9b0acf825f3991f16fc39f85
      size: 491
    - path: models/model.joblib
      md5: fcfc704580fa9607e9bfb67121f26521
      size: 1455
  evaluate:
    cmd: python src/evaluate.py --data data/processed --model 
      models/model.joblib --output evaluation
    deps:
    - path: data/processed/X_test.csv
      md5: 71bcfda447a5023ff614cffae8f3558b
      size: 186616
    - path: data/processed/y_test.csv
      md5: 73edd42799a08b81b9e6acdc34b51e64
      size: 6007
    - path: models/model.joblib
      md5: fcfc704580fa9607e9bfb67121f26521
      size: 1455
    - path: src/evaluate.py
      md5: da59d97fd3c3f9a9ce920ee50180adca
      size: 6420
    outs:
    - path: evaluation/advanced_metrics.json
      md5: b396baec2c9e7e80d3421b3191072991
      size: 208
    - path: evaluation/classification_report.json
      md5: 53d988ffb7eeee49f3d854ad5e749635
      size: 638
    - path: evaluation/classification_report.txt
      md5: 3db8b363abaf3cbceef16012bd5a1e9e
      size: 411
    - path: evaluation/confusion_matrix.png
      md5: 8ebc2018d0f5f0821a4e0285d56fd864
      size: 35605
    - path: evaluation/precision_recall_curve.png
      md5: 5572c2e1a76093a05232751986d7dde4
      size: 42520
    - path: evaluation/roc_curve.png
      md5: 82d195f1f766bde0523100ba474811cb
      size: 59853
