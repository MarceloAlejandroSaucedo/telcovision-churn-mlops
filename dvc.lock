schema: '2.0'
stages:
  prepare:
    cmd: python src/data_prep.py --input data/raw/telco_churn.csv --output 
      data/processed --params params.yaml
    deps:
    - path: data/raw/telco_churn.csv
      hash: md5
      md5: 006527876bfe18c977d74eb4bc59443f
      size: 873370
    - path: params.yaml
      hash: md5
      md5: 8f99b13c06cd2cf8a94517d5e701a548
      size: 698
    - path: src/data_prep.py
      hash: md5
      md5: 9cf2f61a941d8a4a171f393146826b42
      size: 7117
    params:
      params.yaml:
        data_prep:
          test_size: 0.2
          random_state: 42
          target_column: churn
          id_column: customer_id
          numeric_features:
          - age
          - tenure_months
          - monthly_charges
          - total_charges
          categorical_features:
          - gender
          - region
          - contract_type
          - internet_service
          - phone_service
          - multiple_lines
          - payment_method
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 391398ed758f52c93c59b6f941d457d5
      size: 186616
    - path: data/processed/X_train.csv
      hash: md5
      md5: b23ff27a0bbe120f836ace10915f7ef2
      size: 745946
    - path: data/processed/metadata.json
      hash: md5
      md5: 605a6bebb34ff5bb6a8155e766dc5a9e
      size: 1287
    - path: data/processed/y_test.csv
      hash: md5
      md5: 553985da1a7dc3823c3bdf133d691800
      size: 6007
    - path: data/processed/y_train.csv
      hash: md5
      md5: 7f7cc74bb166c9c11a612e41ba908be6
      size: 24007
  train:
    cmd: python src/train.py --data data/processed --model models/model.joblib 
      --metrics metrics.json --params params.yaml
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 391398ed758f52c93c59b6f941d457d5
      size: 186616
    - path: data/processed/X_train.csv
      hash: md5
      md5: b23ff27a0bbe120f836ace10915f7ef2
      size: 745946
    - path: data/processed/y_test.csv
      hash: md5
      md5: 553985da1a7dc3823c3bdf133d691800
      size: 6007
    - path: data/processed/y_train.csv
      hash: md5
      md5: 7f7cc74bb166c9c11a612e41ba908be6
      size: 24007
    - path: params.yaml
      hash: md5
      md5: 8f99b13c06cd2cf8a94517d5e701a548
      size: 698
    - path: src/train.py
      hash: md5
      md5: 19cdcdd015170523263190a62fb18a86
      size: 8071
    params:
      params.yaml:
        train:
          model_type: random_forest
          random_forest:
            n_estimators: 150
            max_depth: 15
            min_samples_split: 10
            min_samples_leaf: 2
            random_state: 42
          metrics:
          - accuracy
          - precision
          - recall
          - f1_score
          - roc_auc
    outs:
    - path: metrics.json
      hash: md5
      md5: fa080b59de9d30eaf88adf6982176fc0
      size: 489
    - path: models/model.joblib
      hash: md5
      md5: 73bf7551b33710d10baed44facbb7a2a
      size: 16765241
