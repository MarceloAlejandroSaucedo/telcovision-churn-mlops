schema: '2.0'
stages:
  prepare:
    cmd: python src/data_prep.py --input data/raw/telco_churn.csv --output 
      data/processed --params params.yaml
    deps:
    - path: data/raw/telco_churn.csv
      md5: 006527876bfe18c977d74eb4bc59443f
      size: 873370
    - path: params.yaml
      md5: 3ecd8da4846ddfe063b0cdbfacfa3be2
      size: 698
    - path: src/data_prep.py
      md5: 17fb07088074d15a61609c21b70a553a
      size: 8131
    params:
      params.yaml:
        data_prep:
          test_size: 0.2
          random_state: 42
          target_column: churn
          id_column: customer_id
          numeric_features:
          - age
          - tenure_months
          - monthly_charges
          - total_charges
          categorical_features:
          - gender
          - region
          - contract_type
          - internet_service
          - phone_service
          - multiple_lines
          - payment_method
    outs:
    - path: data/processed/X_test.csv
      md5: 646270aa580332c42c79d91c8abee00d
      size: 226969
    - path: data/processed/X_train.csv
      md5: 63f6824d79e6b225f412b3f81d6f19ef
      size: 907444
    - path: data/processed/metadata.json
      md5: 9c8cebd5c790a0e6725cb63026f5b19e
      size: 1287
    - path: data/processed/y_test.csv
      md5: 73edd42799a08b81b9e6acdc34b51e64
      size: 6007
    - path: data/processed/y_train.csv
      md5: 6bd7ba9baf5cb0bffaa13d646600493e
      size: 24007
  train:
    cmd: python src/train.py --data data/processed --model models/model.joblib 
      --metrics metrics.json --params params.yaml
    deps:
    - path: data/processed/X_test.csv
      md5: 646270aa580332c42c79d91c8abee00d
      size: 226969
    - path: data/processed/X_train.csv
      md5: 63f6824d79e6b225f412b3f81d6f19ef
      size: 907444
    - path: data/processed/y_test.csv
      md5: 73edd42799a08b81b9e6acdc34b51e64
      size: 6007
    - path: data/processed/y_train.csv
      md5: 6bd7ba9baf5cb0bffaa13d646600493e
      size: 24007
    - path: params.yaml
      md5: 3ecd8da4846ddfe063b0cdbfacfa3be2
      size: 698
    - path: src/train.py
      md5: 77532def6fd4c37231db2ea6cbe6fe39
      size: 8071
    params:
      params.yaml:
        train:
          model_type: random_forest
          random_forest:
            n_estimators: 150
            max_depth: 15
            min_samples_split: 10
            min_samples_leaf: 2
            random_state: 42
          metrics:
          - accuracy
          - precision
          - recall
          - f1_score
          - roc_auc
    outs:
    - path: metrics.json
      md5: 9b3857a4f326eee8508e6f03aa53bb49
      size: 491
    - path: models/model.joblib
      md5: 3734e5013196856c2ad09aee12c74bc3
      size: 16266089
